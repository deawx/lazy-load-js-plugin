
/*! JSLazyLoading JavaScript plugin - Version 1.2
-------------------------------------------------------------------------
Copyright (C) 2015 AddonDev. All rights reserved.
Website: https://addondev.com
GitHub: github.com/philip-sorokin
Developer: Philip Sorokin
Location: Russia, Moscow
E-mail: philip.sorokin@gmail.com
Created: June 2015
License: GNU GPLv2 http://www.gnu.org/licenses/gpl-2.0.html
------------------------------------------------------------------------------ */

function JSLazyLoading(a,b){"use strict";function w(a){e.console&&"function"==typeof console.log&&console.log(a)}function x(a,b){for(var e,d=0,b=b||c.dataAttribute,g=f.images,h=g.length;h>d;d++)(e=g[d].getAttribute(b))&&a(g[d],d,e)}function y(a,b){try{for(var c=0,d=a.length;d>c;c++)if(a[c]&&b(a[c],c))return!0}catch(e){w(e)}}function z(a,b,c){c&&"string"==typeof a&&(a=[a]);for(var d=0,e=a.length;e>d;d++)a[d]&&b(a[d],d)}function O(){var a=n,b=o;return n=e.innerWidth||h.clientWidth||f.body.clientWidth,o=e.innerHeight||h.clientHeight||f.body.clientHeight,a!==n||b!==o}function P(){O()?(c.softMode&&z(g,function(a){a.jsllProportion&&(a.style.height=a.offsetWidth/a.jsllProportion+"px")}),Q()):S()}function Q(){try{g.sort(function(a,b){var c=F(a),d=F(b);return c.top===d.top?c.left-d.left:c.top-d.top}),S()}catch(a){w(a)}}function R(a,b){var d=G(a);if(d){if(a.removeAttribute(c.dataAttribute),b){var e=a.cloneNode(),f=a.jsllCSSText+"; ",g=function(){if(z(["load","error"],function(b){B(a,b,g)}),c.fadeInPreserveOpacity)var b=getComputedStyle(e,"").opacity,d=1*c.fadeInDuration/b;else b=1,d=c.fadeInDuration;a.style.cssText=f+"opacity: 0 !important; ",e.parentNode.replaceChild(a,e),setTimeout(function(){a.style.cssText=f+L+": opacity "+d+"ms ease-in !important; opacity: "+b+" !important; ",setTimeout(function(){a.style.cssText=f},d+100)},16)};a.parentNode.replaceChild(e,a)}else r&&(g=function(){z(["load","error"],function(b){B(a,b,g)}),a.style.cssText=a.jsllCSSText});g&&z(["load","error"],function(b){A(a,b,g)}),a.src=d,m--}}function S(a,b){var d,e=0;if(D)var f=D();b=b||!c.rectangularScope,y(g,function(a,h){if(E(a,f))R(d=a,c.fadeInEffect),delete g[h];else if(e++>=c.limit)return d?(z(["load","error"],function(a){A(d,a,function(){S(null,!0)})}),!0):b})}function T(){clearTimeout(i),y(g,function(a,b){return z(["load","error"],function(b){A(a,b,function(){i=setTimeout(T,c.sequentialLoading)})}),R(a,!1),delete g[b]})}b=b||function(){for(var a=0,b=document.getElementsByTagName("script");a<b.length;a++){var c=b[a].getAttribute("src");if(c){var d=c.search(/\/jslazyloading(?:\.min)?\.js(\?.*)?$/i);if(-1!==d)return c.substr(0,d)}}return""}();var c={docReady:!0,dataAttribute:"data-src",multiServing:!1,multiServingType:"density",multiServingBreakpoints:{},sequentialLoading:null,placeholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",loaderImage:b+"/loader.gif",backgroundColor:null,fadeInEffect:!0,fadeInDuration:400,fadeInPreserveOpacity:!0,softMode:!1,ajaxListener:!1,limit:0,rectangularScope:!1,rangeY:0,rangeX:0};if("object"==typeof a)for(var d in a)c[d]="string"!=typeof a[d]?a[d]:Number(a[d])||a[d];this.started;var g,i,j,l,n,o,e=window,f=e.document,h=f.documentElement,k=this,m=0,p="width",q="height",r="";if(l=navigator.userAgent.match(/(Chrome)|(?:(MSIE)|(iP(?:hone|od|ad).+?OS)) (\d+)/))if(l[1])var s=!0;else if(l[2])var t=l[4]<9,u=l[4]<8;else if(l[3])var v=l[4]<5;if(t){var A=function(a,b,c){a.attachEvent("on"+b,c)},B=function(a,b,c){a.detachEvent("on"+b,c)},C=function(a){try{h.doScroll("left"),a()}catch(b){setTimeout(function(){C(a)},10)}};u&&(p="data-width",q="data-height",c.placeholder=b+"/blank.gif")}else A=function(a,b,c){a.addEventListener(b,c,!1)},B=function(a,b,c){a.removeEventListener(b,c,!1)},C=function(a){"complete"===f.readyState?a():f.addEventListener("DOMContentLoaded",a,!1)};if(!h.getBoundingClientRect||v)var D=function(){return{top:e.pageYOffset||h.scrollTop||f.body.scrollTop,left:e.pageXOffset||h.scrollLeft||f.body.scrollLeft}},E=c.rectangularScope?function(a,b){var d=0,e=0,f=a.offsetWidth,g=a.offsetHeight;do d+=a.offsetTop||0,e+=a.offsetLeft||0;while(a=a.offsetParent);return d<=o+b.top+c.rangeY&&d+g>=b.top-c.rangeY&&e<=n+b.left+c.rangeX&&e+f>=b.left-c.rangeX}:function(a,b){var c=0;do c+=a.offsetTop||0;while(a=a.offsetParent);return c<=o+b.top},F=function(a){var b=h.clientTop||f.body.clientTop,c=h.clientLeft||f.body.clientLeft;do b+=a.offsetTop||0,c+=a.offsetLeft||0;while(a=a.offsetParent);return{top:b,left:c}};else E=c.rectangularScope?function(a){var b=a.getBoundingClientRect();return b.top<=o+c.rangeY&&b.bottom>=0-c.rangeY&&b.left<=n+c.rangeX&&b.right>=0-c.rangeX}:function(a){return a.getBoundingClientRect().top<=o+c.rangeY},F=function(a){return a.getBoundingClientRect()};var G=function(a){return a.getAttribute(c.dataAttribute)};if(c.multiServing&&c.multiServingBreakpoints instanceof Object){c.multiServing="boolean"==typeof c.multiServing?"manual":c.multiServing.toLowerCase();var H=function(a){var d,b=new Array;for(var e in c.multiServingBreakpoints)(d=a(e,c.multiServingBreakpoints[e].toLowerCase()))&&b.push(d);if(b.length){b.sort(function(a,b){return a.value-b.value});for(var f=0;f<b.length;f++)I[f]=Math.abs(b[f].value),b[f]=b[f].name,"manual"!==c.multiServing&&(b[f]=b[f].substr(1))}return b},I=new Array,J=e.matchMedia&&e.matchMedia("(min-resolution: 1dpi)").matches,K=H("density"===c.multiServingType.toLowerCase()?function(a,b){return"string"==typeof b&&"dpi"===b.substr(-3)&&(delete c.multiServingBreakpoints[a],b=parseInt(b),J&&e.matchMedia("(min-resolution: "+b+"dpi)").matches||!J&&e.devicePixelRatio>=b/96)?{name:a,value:-b}:void 0}:function(a,b){var c=parseInt(b);return"string"==typeof b&&"px"===b.substr(-2)&&screen.width<=c?{name:a,value:c}:void 0})}if(c.fadeInEffect){var L=function(){for(var a=0;a<arguments.length;a++)if(arguments[a]in h.style)return arguments[a]}("transition","-webkit-transition","-moz-transition","-o-transition");if(L&&("desktop"!==c.fadeInEffect||!("ontouchstart"in e||"onmsgesturechange"in e)||e.screen.width>768)){if(s){var M=f.createElement("style");M.type="text/css",M.appendChild(f.createTextNode("img {-webkit-transform: translateZ(0)}")),f.getElementsByTagName("head")[0].appendChild(M)}}else c.fadeInEffect=!1}c.backgroundColor&&(r+="; background-color: "+c.backgroundColor+" !important"),c.loaderImage&&(r+="; background-image: url('"+c.loaderImage+"') !important; background-position: center center; background-repeat: no-repeat !important");var N=c.softMode?function(a){var b=a.getAttribute(p),c=a.getAttribute(q);b&&c&&(a.jsllProportion=b/c),a.jsllCSSText=a.getAttribute("style")||"",a.style.cssText+=r+"; height: "+a.offsetWidth/a.jsllProportion+"px"}:r?function(a){a.jsllCSSText=a.getAttribute("style")||"",a.style.cssText+="; "+r}:!1;this.refresh=function(){if(this.started){if(g=new Array,K&&K.length)if("manual"!==c.multiServing){var a=new Array,d=new Array,h="analogues="+K.join("+")+"&srcp="+I.join("+"),i=new RegExp("^(?:(?:https?:)?//"+location.host+"/+|/+)([^?]+?\\.[a-zA-Z]+)$","gm"),j="php"===c.multiServing?"handler.php":"apache";x(function(b,c,e){a.push(e),d.push(b)}),a.length&&(a=a.join("\n").replace(i,b+"/mirror/"+j+"/$1?"+h).split("\n"),z(d,function(b,d){b.setAttribute(c.dataAttribute,a[d])}))}else x(function(a,b,d){a.setAttribute(c.dataAttribute,d)},K[0]);O(),x(function(a){g.push(a),c.placeholder&&(a.src=c.placeholder),N&&!a.jsllCSSText&&N(a)}),m=g.length,"number"==typeof c.sequentialLoading&&T(),"complete"!==f.readyState?(A(e,"load",Q),S()):Q()}return!0},this.abort=function(){return this.started=!1,B(e,"scroll",S),B(e,"resize",P),j&&(clearInterval(j),JSLazyLoading.ajaxListenerEnabled=!1),z(g,R),!0},this.start=function(){return this.started||(e.operamini?this.abort():(this.started=!0,this.refresh(),A(e,"scroll",S),A(e,"resize",P),c.ajaxListener&&!JSLazyLoading.ajaxListenerEnabled&&(JSLazyLoading.ajaxListenerEnabled=!0,j=setInterval(function(){var a=0;x(function(b){a++}),a!==m&&k.refresh()},100)))),!0},c.docReady?C(function(){k.start.call(k)}):this.start()}
