
/*! JSLazyLoading JavaScript plugin - Version 1.1
-------------------------------------------------------------------------
	Copyright (C) 2015 Addon Dev. All rights reserved.
	Website: www.addondev.com
	GitHub: github.com/addondev
	Developer: Philip Sorokin
	Location: Russia, Moscow
	E-mail: philip.sorokin@gmail.com
	Created: June 2015
	License: GNU GPLv2 http://www.gnu.org/licenses/gpl-2.0.html
------------------------------------------------------------------------------ */

function JSLazyLoading(a){"use strict";function t(a){for(var c=0,d=g.getElementsByTagName("img"),e=d.length;e>c;c++)d[c].getAttribute(b.dataAttribute)&&a(d[c])}function u(a,b){try{for(var c=0,d=a.length;d>c;c++)if(a[c]&&b(a[c],c))return!0}catch(e){}}function v(a,b){for(var c=0,d=a.length;d>c;c++)a[c]&&b(a[c],c)}function G(a,c,d){var e=d||a;e.onerror=function(){"undefined"!=typeof a.jsllCSSText&&(a.style.cssText=a.jsllCSSText),d&&(a.setAttribute("data-error-src",d.src),a.src="about:blank"),setTimeout(N,100)},e.src=c,a.removeAttribute(b.dataAttribute),n--}function K(){var a=o,c=p;return o=b.container===d?f.innerWidth||i.clientWidth||e.body.clientWidth:f.clientWidth,p=b.container===d?f.innerHeight||i.clientHeight||e.body.clientHeight:f.clientHeight,a!==o||c!==p}function L(){K()?(b.softMode&&v(h,function(a){a.jsllProportion&&(a.style.height=a.offsetWidth/a.jsllProportion+"px")}),M()):N()}function M(){try{h.sort(function(a,b){var c=B(a),d=B(b);return c.top===d.top?c.left-d.left:c.top-d.top}),N()}catch(a){}}function N(a,c){var d,e=0;if(z)var f=z();c=c||!b.rectangularScope,u(h,function(a,g){if(A(a,f))F(d=a),delete h[g];else if(e++>=b.limit)return d?(w(d,"load",function(){N(null,!0)}),!0):c})}function O(){clearTimeout(j),u(h,function(a,c){return F(a),w(a,"load",function(){j=setTimeout(O,b.sequentialLoading)}),delete h[c]})}function P(){k=setInterval(function(){var a=0;t(function(){a++}),a!==n&&l.refresh()},100)}var b={docReady:!0,container:window,dataAttribute:"data-src",multiServe:!1,multiServeBreakpoints:{"data-src-extra-small":220,"data-src-small":420,"data-src-medium":768},sequentialLoading:null,placeholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",loaderImage:null,backgroundColor:null,fadeInEffect:!0,fadeInDuration:400,fadeInPreserveOpacity:!0,softMode:!1,ajaxListener:!1,limit:0,rectangularScope:!1,rangeY:0,rangeX:0};if(a instanceof Object)for(var c in a)b[c]=a[c];var f,g,h,j,k,m,n,o,p,d=window,e=d.document,i=e.documentElement,l=this,q="width",r="height",s="";if((m=navigator.userAgent.match(/MSIE ([\d.]+)/))&&m[1]<9){var w=function(a,b,c){a.attachEvent("on"+b,c)},x=function(a,b,c){a.detachEvent("on"+b,c)},y=function(a){try{i.doScroll("left"),a()}catch(b){setTimeout(function(){y(a)},10)}};8>m&&(q="data-width",r="data-height")}else w=function(a,b,c){a.addEventListener(b,c,!1)},x=function(a,b,c){a.removeEventListener(b,c,!1)},y=function(a){"complete"===e.readyState?a():e.addEventListener("DOMContentLoaded",a,!1)};if(b.container!==d||!i.getBoundingClientRect||(m=navigator.userAgent.match(/iP(hone|od|ad) OS (\d+)/))&&m[2]<5)var z=function(){if(b.container===d)var a=d.pageYOffset||i.scrollTop||e.body.scrollTop,c=d.pageXOffset||i.scrollLeft||e.body.scrollLeft;else a=f.scrollTop,c=f.scrollLeft;return{top:a,left:c}},A=b.rectangularScope?function(a,c){var d=0,e=0,g=a.offsetWidth,h=a.offsetHeight;do d+=a.offsetTop||0,e+=a.offsetLeft||0,a=a.offsetParent;while(a&&a!=f);return d<=p+c.top+b.rangeY&&d+h>=c.top-b.rangeY&&e<=o+c.left+b.rangeX&&e+g>=c.left-b.rangeX}:function(a,b){var c=0;do c+=a.offsetTop||0,a=a.offsetParent;while(a&&a!=f);return c<=p+b.top},B=function(a){var b=i.clientTop||e.body.clientTop,c=i.clientLeft||e.body.clientLeft;do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a&&a!=f);return{top:b,left:c}};else A=b.rectangularScope?function(a){var c=a.getBoundingClientRect();return c.top<=p+b.rangeY&&c.bottom>=0-b.rangeY&&c.left<=o+b.rangeX&&c.right>=0-b.rangeX}:function(a){return a.getBoundingClientRect().top<=p+b.rangeY},B=function(a){return a.getBoundingClientRect()};var C=function(a){return a.getAttribute(b.dataAttribute)};if(b.multiServe&&b.multiServeBreakpoints instanceof Object){var D=new Array;for(var E in b.multiServeBreakpoints)d.screen.width<=b.multiServeBreakpoints[E]&&D.push({name:E,value:b.multiServeBreakpoints[E]});if(D.length){D.sort(function(a,b){return a.value>b.value});for(var c=0;c<D.length;c++)D[c]=D[c].name;C=function(a){for(var d,c=0;c<D.length;c++)if(d=a.getAttribute(D[c]))return d;return a.getAttribute(b.dataAttribute)}}}var F=function(a){var b=C(a);b&&("undefined"!=typeof a.jsllCSSText&&w(a,"load",function(){a.style.cssText=a.jsllCSSText}),G(a,b))};if(b.fadeInEffect){var H=function(){for(var a=0;a<arguments.length;a++)if(arguments[a]in i.style)return arguments[a]}("transition","-webkit-transition","-moz-transition","-o-transition");if(H&&("desktop"!==b.fadeInEffect||!("ontouchstart"in d||"onmsgesturechange"in d)||d.screen.width>768)){if(/Chrome/.test(navigator.userAgent)){var I=e.createElement("style");I.type="text/css",I.appendChild(e.createTextNode("img {-webkit-transform: translateZ(0px)}")),e.getElementsByTagName("head")[0].appendChild(I)}F=function(a){var c=C(a);if(c){var d=new Image;w(d,"load",function(){if(a.style.cssText=a.jsllCSSText||"",b.fadeInPreserveOpacity)var c=getComputedStyle(a,"").opacity,e=1*b.fadeInDuration/c;else c=1,e=b.fadeInDuration;a.style.cssText+="; opacity: 0 !important; ",a.src=d.src,setTimeout(function(){a.style.cssText+=H+": opacity "+e+"ms ease-in !important; opacity: "+c+" !important; ",setTimeout(function(){a.style.cssText=a.jsllCSSText||""},e+200)},16)}),G(a,c,d)}}}}if(b.backgroundColor&&(s+="; background-color: "+b.backgroundColor+" !important"),b.loaderImage&&(s+="; background-image: url('"+b.loaderImage+"') !important; background-position: center center !important; background-repeat: no-repeat !important"),b.softMode)var J=function(a){var b=a.getAttribute(q),c=a.getAttribute(r);b&&c&&(a.jsllProportion=b/c),a.jsllCSSText=a.getAttribute("style")||"",a.style.cssText+=s+"; height: "+a.offsetWidth/a.jsllProportion+"px"};else s&&(J=function(a){a.jsllCSSText=a.getAttribute("style")||"",a.style.cssText+=s});this.refresh=function(){l.started&&(K(),h=new Array,t(function(a){h.push(a),a.src=b.placeholder,J&&"undefined"==typeof a.jsllCSSText&&J(a)}),n=h.length,"number"==typeof b.sequentialLoading&&O(),"complete"!==e.readyState?(w(d,"load",M),N()):M())},this.abort=function(){l.started=!1,x(f,"scroll",N),x(f,"resize",L),k&&(clearInterval(k),JSLazyLoading.ajaxListenerEnabled=!1),t(function(a){var b=C(a);b&&(a.src=b)})},this.start=function(){l.started||(b.container===d?(f=d,g=e):(f=e.getElementById(b.container),g=f),d.operamini?l.abort():f&&(l.started=!0,l.refresh(),w(f,"scroll",N),w(f,"resize",L),b.ajaxListener&&!JSLazyLoading.ajaxListenerEnabled&&(JSLazyLoading.ajaxListenerEnabled=!0,P())))},b.docReady?y(this.start):this.start()}
